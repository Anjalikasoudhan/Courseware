<app-header></app-header>

<div class="row" id="profilecard">
    <div *ngFor="let professor of profileDetails()" id="bloodCards">
        <a>
            <img 
                *ngIf="professor.gender === 'Male' || professor.gender === 'male'" 
                class="bloodimg" 
                [src]="'assets/img/maleprofessor.png'" 
                width="140" 
                height="140"
                alt="Male Professor"
            >
        </a>
        <a>
            <img 
                *ngIf="professor.gender === 'Female' || professor.gender === 'female'" 
                class="bloodimg" 
                [src]="'assets/img/femaleprofessor.png'" 
                width="140" 
                height="140"
                alt="Female Professor"
            >
        </a>
        <div class="card-block">
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.professorname}}</b> </div>
            <div class="text">
                <small style="font-size: smaller; margin-left: 6%; padding: 3px 8px 3px 8px; background-color: rgb(87, 64, 8); border-radius: 10px; font-weight: bold; width: 55%; color: white;">
                    {{professor.professorid}}
                </small>
            </div>
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.degreecompleted}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.mobile}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.institutionname}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.email}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"> {{professor.experience}} years of experience</b> </div>
            <div class="btndiv" style="align-items: center;">
                <button class="editbtn" (click)="editProfile()"><i class="fa fa-edit"></i> Edit</button>
            </div>
            <small id="message" *ngIf="temp === true" style="text-align: center; margin-top: 3%; color: green;"><b>{{msg}}</b></small> 
            <small id="errorMessage" *ngIf="temp === false && msg" style="text-align: center; margin-top: 3%; color: red;"><b>{{msg}}</b></small>
        </div>
    </div>
</div>
  
<div class="container register" id="profileform">
    <div class="row">
        <div class="col-md-9 register-right">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <h3 class="textual">Update Professor Profile</h3>
                    <div *ngIf="msg" [ngClass]="{'text-success': temp, 'text-danger': !temp}" style="text-align: center; font-weight: bold;">
                        {{msg}}
                    </div>
                    <small *ngIf="!msg" style="font-weight: bold; margin-left: 25%; text-align: center; color: darkgreen;">
                        <b>Dear {{loggedUser}}, update your profile here</b>
                    </small>
                    
                    <form #Updateform="ngForm" style="margin-top: 2%;" (ngSubmit)="updateProfessorProfile()">
                        <div class="row register-form">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Professor Name *" name="professorname" 
                                    [(ngModel)]="professor.professorname" required 
                                    #professorname="ngModel"
                                    [class.is-invalid]="professorname.invalid && professorname.touched">
                                   <small class="text-danger" *ngIf="professorname.invalid && professorname.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="email" class="form-control" placeholder="Email address *" name="email" 
                                    [(ngModel)]="professor.email" required pattern="^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$"
                                    #email="ngModel"
                                    [class.is-invalid]="email.invalid && email.touched">
                                    <div *ngIf="email.invalid && email.touched">
                                        <small class="text-danger" *ngIf="email.errors && email.errors['required']"><b>Required field</b></small>
                                        <small class="text-danger" *ngIf="email.errors && email.errors['pattern']"><b>Invalid email address</b></small>
                                    </div>                          
                                </div>
                                <div class="form-group">
                                    <select class="form-control" name="gender" [(ngModel)]="professor.gender" required 
                                    #gender="ngModel"
                                    [class.is-invalid]="gender.invalid && gender.touched">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                    <small class="text-danger" *ngIf="gender.invalid && gender.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="tel" maxlength="10" minlength="10" class="form-control" placeholder="Mobile *" name="mobile" 
                                    [(ngModel)]="professor.mobile" required 
                                    #mobile="ngModel"
                                    [class.is-invalid]="mobile.invalid && mobile.touched">
                                   <small class="text-danger" *ngIf="mobile.invalid && mobile.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control" placeholder="Password *" name="password" 
                                    [(ngModel)]="professor.password" required 
                                    #password="ngModel"
                                    [class.is-invalid]="password.invalid && password.touched">
                                    <div *ngIf="password.invalid && password.touched">
                                      <small class="text-danger" *ngIf="password.errors && password.errors['required']"><b>Required field</b></small>
                                    </div>
                                    <small style="color: gray; font-size: 10px;">At least one uppercase, numeric digit, lowercase, special character, length of 6-20</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Institution name *" name="institutionname" 
                                    [(ngModel)]="professor.institutionname" required 
                                    #institutionname="ngModel"
                                    [class.is-invalid]="institutionname.invalid && institutionname.touched">
                                   <small class="text-danger" *ngIf="institutionname.invalid && institutionname.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Department *" name="department" 
                                    [(ngModel)]="professor.department" required 
                                    #department="ngModel"
                                    [class.is-invalid]="department.invalid && department.touched">
                                   <small class="text-danger" *ngIf="department.invalid && department.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="number" class="form-control" placeholder="Years of experience *" name="experience" 
                                    [(ngModel)]="professor.experience" required min="0"
                                    #experience="ngModel"
                                    [class.is-invalid]="experience.invalid && experience.touched">
                                   <small class="text-danger" *ngIf="experience.invalid && experience.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Degrees completed *" name="degreecompleted" 
                                    [(ngModel)]="professor.degreecompleted" required 
                                    #degreecompleted="ngModel"
                                    [class.is-invalid]="degreecompleted.invalid && degreecompleted.touched">
                                   <small class="text-danger" *ngIf="degreecompleted.invalid && degreecompleted.touched"><b>Required field</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control" placeholder="Confirm password *" name="confirmPassword" 
                                    [(ngModel)]="confirmPassword" required 
                                    #confirmPasswordInput="ngModel"
                                    [class.is-invalid]="(confirmPasswordInput.invalid && confirmPasswordInput.touched) || (professor.password !== confirmPassword && confirmPasswordInput.touched)">
                                    <small class="text-danger" 
                                           *ngIf="professor.password !== confirmPassword && confirmPasswordInput.touched">
                                        <b>Passwords do not match</b>
                                    </small>
                                    <small class="text-danger" 
                                           *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched">
                                        <b>Required field</b>
                                    </small>
                                </div>
                            </div>
                        </div>
                        <div class="form-group text-center">
                            <button type="submit" 
                                    class="btn registerbtn" 
                                    [disabled]="Updateform.form.invalid || professor.password !== confirmPassword">
                                Update Profile
                            </button>
                            <button type="button" class="btn btn-secondary ml-2" (click)="cancelEdit()">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>